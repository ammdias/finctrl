<h1 id="finance-control-manual">FINANCE CONTROL MANUAL</h1>
<p>Manual for <strong>FinCtrl version 0.11, 2024-01-16</strong></p>
<p>This is a very basic program to control personal finances. It depends on <a href="https://python.org">Python 3</a> and was thought to be <strong>used only from the command line</strong>. It supports multiple accounts with possibly different currencies and transactions composed of multiple parcels, each with its different tags. Check the <a href="#USAGE">USAGE</a> section for a more complete overview of the program.</p>
<p>This is what the program IS NOT and CANNOT DO:</p>
<ul>
<li>It will not contact your home banking system;</li>
<li>It will not scan your bills and insert them automatically;</li>
<li>It will not produce beautiful (or even ugly) graphics;</li>
<li>It will not analyse your savings and make predictions on where you will be in ten years;</li>
<li>It will not automatically add interest rates to your savings accounts or loans.</li>
</ul>
<p>This is what it CAN DO:</p>
<ul>
<li>Record your earnings and expenses exactly as you enter them in a standard SQLite database;</li>
<li>List your earnings and expenses filtered by date, account and/or item tags;</li>
<li>Export your listings to CSV files that can be further processed in other tools like spreadsheet applications.</li>
</ul>
<p>Copyright (C) 2021 António Manuel Dias</p>
<p>contact: ammdias@gmail.com</p>
<p>website: <a href="https://github.com/ammdias/finctrl">AMMDIAS GitHub</a></p>
<h2 id="contents">CONTENTS</h2>
<ul>
<li><a href="#installation">INSTALLATION</a>
<ul>
<li><a href="#uninstall-the-program">Uninstall the program</a></li>
</ul></li>
<li><a href="#usage">USAGE</a>
<ul>
<li><a href="#command-line-interface">Command line interface</a></li>
<li><a href="starting-and-quitting-the-program">Starting and quitting the program</a></li>
<li><a href="#getting-help">Getting help</a></li>
<li><a href="#creating-and-opening-a-file">Creating and opening a file</a></li>
<li><a href="#default-settings">Default settings</a></li>
<li><a href="#currencies">Currencies</a></li>
<li><a href="#accounts-and-transactions">Accounts and Transactions</a></li>
<li><a href="#correcting-mistakes">Correcting mistakes</a></li>
<li><a href="#listing-and-exporting-data">Listing and exporting data</a></li>
<li><a href="#advanced-usage">Advanced usage</a>
<ul>
<li><a href="#scripting">Scripting</a></li>
<li><a href="#backup-and-trim-the-database">Backup and trim the database</a></li>
<li><a href="#usage-in-ms-windows">Usage in MS Windows</a></li>
</ul></li>
</ul></li>
<li><a href="#reference">REFERENCE</a>
<ul>
<li><a href="#commands-arguments-reference">Command’s arguments reference</a></li>
<li><a href="#add">add</a></li>
<li><a href="#backup">backup</a></li>
<li><a href="#bye">bye</a></li>
<li><a href="#change">change</a></li>
<li><a href="#close">close</a></li>
<li><a href="#delete">delete</a></li>
<li><a href="#find">find</a></li>
<li><a href="#help">help</a></li>
<li><a href="#list">list</a></li>
<li><a href="#open">open</a></li>
<li><a href="#set">set</a></li>
<li><a href="#show">show</a></li>
<li><a href="#source">source</a></li>
<li><a href="#trim">trim</a></li>
<li><a href="#database-structure">Database structure</a></li>
</ul></li>
<li><a href="#license">LICENSE</a></li>
</ul>
<h2 id="installation">INSTALLATION</h2>
<p>The instructions below are for installation on a modern Linux system. They may work on other modern Unix-like systems like BSD derivatives, including MacOS, but that has not been tested and may require some tweaking. Try it at your own risk. For MS Windows installation, refer to the section <a href="#usage-in-ms-windows">Usage in MS Windows</a>.</p>
<ol type="1">
<li><p>Download and unzip the program’s compressed file in a directory of your choosing. To download the most recent version, check the <a href="https://github.com/ammdias/finctrl">AMMDIAS GitHub page</a>.</p></li>
<li><p>Open a terminal in the directory where the program was uncompressed and run the installation script with Python 3:</p>
<pre><code>  $ python3 INSTALL.py</code></pre>
<p>You will be prompted for the installation directory — i.e. the directory under which the folder containing all the application files will be placed — and for the start link directory — i.e. the directory where the symbolic link for the program will be created.</p>
<p>The default directories will install the program for the current user only and are suited for single-user systems. If you want to keep these settings, just press ENTER when prompted. The program will be installed in the directory <code>$HOME/.local/lib/FinCtrl</code> and the symbolic link <code>$HOME/.local/bin/finctrl</code> will be created. On most Linux systems the <code>$HOME/.local/bin</code> directory will be automatically inserted in the execution PATH, if it exists. If it doesn’t, you will have to add it manually.</p>
<p>If you want to install the program for all the users of the system, you should change the directories accordingly, e.g. <code>/usr/local/lib</code> for the installation directory and <code>/usr/local/bin</code> for the start link. Of course, you will need to run the installation script with administration privileges:</p>
<pre><code>  $ sudo python3 INSTALL.py</code></pre>
<p>If a previous installation exists on the selected directory, you will be asked if you want to overwrite it. Answer “<code>yes</code>” (or just “<code>y</code>”) if that is the case or “<code>no</code>”/“<code>n</code>” if not.</p></li>
<li><p>Test that the installation was successful with the command:</p>
<pre><code>$ finctrl</code></pre>
<p>(this should open the program and present its default prompt)</p>
<p>Now, enter the following commands:</p>
<pre><code>FinCtrl &gt; help</code></pre>
<p>(the program should present a list of all the available commands)</p>
<pre><code>FinCtrl &gt; bye</code></pre>
<p>(the program should close; you may also use the end-of-file command – CTRL-D in Linux – to close the program)</p></li>
</ol>
<h3 id="uninstall-the-program">Uninstall the program</h3>
<p>To uninstall the program, run it with the <code>--uninstall</code> option:</p>
<pre><code>   $ finctrl --uninstall</code></pre>
<p>or run the uninstall script in the directory where the program was installed:</p>
<pre><code>   $ python3 UNINSTALL.py</code></pre>
<p>Remember that you must use <code>sudo</code> if you installed the program for all the users.</p>
<h2 id="usage">USAGE</h2>
<p>The purpose of this program is to control a user’s personal finances by means of a simple command line interface. The user may configure several <em>accounts</em> (e.g. a bank account, a savings account, the credit card account, etc.), each with its own <em>currency</em>. All operations on the accounts are entered as <em>transactions</em>, each of which may be composed of several <em>parcels</em>. This way, a supermarket bill may be split on its items, so that the user may have a more fine control over one’s expenses. Each parcel may also be tagged with several tags, allowing the listing of the spendings (or earnings) by category.</p>
<p>The data is stored in standard <a href="https://sqlite.org">SQLite</a> files (database structure documented in the <a href="#advanced-usage">Advanced Usage</a> section). One file should be fine for each user, but any number of them may be used if the user wants to split its accounts over several subjects.</p>
<p>In this section I will try to give an overview of the program usage and its possibilities. I will do this in a <em>story-telling like</em> fashion, in each step describing a new feature and the way to use it. For the complete command reference, you should then refer to the appropriate <a href="#reference">REFERENCE</a> subsection.</p>
<h3 id="command-line-interface">Command line interface</h3>
<p>I assume that the user is familiarized with the <em>normal</em> way a command line interface works — basically, issuing commands at the prompt and reading the program’s answer, if any. Some notes:</p>
<ol type="1">
<li><p>Blank lines will have no effect (will just be ignored);</p></li>
<li><p>If your system supports it, you will have command history in each session: press arrow up or <code>CTRL+P</code> for previous command / arrow down or <code>CTRL-N</code> for the next. The usual control key bindings may also work:</p>
<ul>
<li><code>CTRL+A</code> to go to the beginning of the line;</li>
<li><code>CTRL+E</code> to go to the end;</li>
<li><code>CTRL+W</code> to delete previous word;</li>
<li><code>CTRL+K</code> to delete from the cursor to the end of the line;</li>
</ul></li>
<li><p>When entering a command longer than a screen line, you may split it over several lines by ending each line (except the last) with a single backslash: “<code>\</code>”. The prompt after that will change to a single colon (<code>:</code>) until you end the command. If you make a mistake while entering a multi-line command, just finish the line with three consecutive backslashes (<code>\\\</code>) to discard the whole command. The command will only be interpreted when complete, which means the program will not warn you of a mistake in a single line.</p>
<pre><code>FinCtrl &gt; help bye
Quit Finance Control.

FinCtrl &gt; help \
        : bye
Quit Finance Control.

FinCtrl &gt; help \
        : something wrong \\\
FinCtrl &gt;  </code></pre></li>
<li><p>All commands are case-sensitive, so <code>bye</code> is different from <code>BYE</code> or <code>Bye</code> — the first will be recognised as a command and quit the program, but the others will originate an error message:</p>
<pre><code> FinCtrl &gt; Bye
 *** Error: (Syntax) &#39;Bye&#39; is not a recognized command.</code></pre>
<p>However, although the commands are case-sensitive, some arguments may be entered in any case, like account names or tags. Also, the answer to inline questions may be given in lower or upper case. Examples of those are given throughout this manual.</p></li>
<li><p>Some commands or options have a shortcut version that may be used interchangeably. That will be indicated in the <a href="#refence">REFERENCE</a> section and in the online help by enveloping the optional characters in square brackets. For example, the <a href="#show-copyright">show copyright</a> command may be entered as <code>show</code> or <code>sh</code>:</p>
<pre><code>FinCtrl &gt; show copyright
Finance Control 0.11
(C) 2021 António Manuel Dias &lt;ammdias@gmail.com&gt;
(...)</code></pre>
<p>or</p>
<pre><code>FinCtrl &gt; sh copyright
Finance Control 0.11
(C) 2021 António Manuel Dias &lt;ammdias@gmail.com&gt;
(...)</code></pre>
<p>This is explicitly stated in <em>help</em> text of the command:</p>
<pre><code>FinCtrl &gt; help show
Show a specific record&#39;s data:
        &gt; sh[ow] acc[ount] ACCOUNT_NAME|ACCOUNT_ID
        (...)</code></pre></li>
<li><p>Some commands will require information from the user, which must be provided following these general rules:</p>
<ul>
<li><p>Positional arguments must follow the order they are listed in the command help or <a href="#reference">REFERENCE</a> page. Keyword arguments may be entered in any order, immediately after the key word. Example:</p>
<pre><code>&gt; command POS1 POS2 keyword_a ARG-A keyword_b ARG-B
&gt; command keyword_b ARG-B POS1 keyword_a ARG-A POS2 </code></pre>
<p>These commands would be valid and equivalent because the positional arguments are given in order (POS1 before POS2) and the keyword arguments (ARG-A and ARG-B) always follow the respective keyword (keyword_a and keyword_b).</p></li>
<li><p>Monetary amounts must consist of positive or negative integer or decimal values, using the decimal separator configured in the account they belong to. Examples: <code>123</code>, <code>123.24</code>, <code>-123.5</code>.</p>
<p>Also, the decimal part may have at most the number of decimal places configured in the respective currency: the program will automatically truncate the remaining decimal places. See the <a href="#currencies">Currencies</a> section below for details on how to find or change an account’s decimal separator and number of decimal places.</p></li>
<li><p>Dates must be provided in the general form YEAR-MONTH-DAY. The year may be omitted (the current year is implicit) or entered without the century (21st century is implicit). The field separator may be a dash (‘-’) or a forward slash (‘/’). Example: <code>2024-01-12</code>, <code>23-1-12</code> and <code>1/12</code> all refer to the January 12th of 2024 (assuming 2024 is the current year).</p>
<p>The words <code>today</code> or <code>now</code> may be used in replacement of the current date.</p></li>
<li><p>Text values with spaces must be enveloped by single- or double-quotes. If a text value has single-quotes, use double-quotes to envelop it and vice-versa.</p></li>
<li><p>Number values must be positive integers (only decimal digits allowed).</p></li>
<li><p>List values, used when entering tags, are text values separated by commas. Same rule applies as for text values: if any value of the list has spaces or quotes, the whole list must be enveloped by the other kind of quotes. Example:</p>
<ul>
<li><code>food,vegetables</code></li>
<li><code>'car, washing liquid'</code></li>
</ul></li>
</ul></li>
<li><p>If a line of the output of a command is longer than the terminal width, it will be truncated and terminated with an ellipsis (<code>...</code>). If the output has more lines than fit in the terminal height then the output will be split in pages and at the end of each page you will have the option to go to the next page (enter <code>next</code>, <code>n</code> or ENTER), go back to the previous (enter <code>previous</code> or <code>p</code>), go to a specific page (enter its page number) or quit the presentation (enter <code>quit</code> or <code>q</code>).</p>
<pre><code>FinCtrl &gt; show license inline

### GNU GENERAL PUBLIC LICENSE

Version 3, 29 June 2007

Copyright (C) 2007 Free Software Foundation, Inc.
&lt;https://fsf.org/&gt;

Everyone is permitted to copy and distribute verbatim copies of this
license document, but changing it is not allowed.

Page 1 of 30. (N)ext / (P)revious / Page number / (Q)uit ? q

FinCtrl &gt;</code></pre></li>
</ol>
<h3 id="starting-and-quitting-the-program">Starting and quitting the program</h3>
<p>Assuming the program is correctly installed, to start the program just open a terminal and type:</p>
<pre><code>$ finctrl</code></pre>
<p>The prompt should display the welcome text with the version and copyright notice and change to the standard prompt:</p>
<pre><code>Finance Control
Version: 0.11
Copyright (C) 2021 António Manuel Dias &lt;ammdias@gmail.com&gt;

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.

FinCtrl &gt;</code></pre>
<p>To close the program, use the <a href="#bye">bye</a> command:</p>
<pre><code>FinCtrl &gt; bye
Bye.</code></pre>
<p>The program will exit and print a goodbye message and the prompt will change to the terminal’s prompt. Alternately, you may quit the program by typing the system’s end-of-file keyboard shortcut (CTRL-D in Linux) or <code>EOF</code>.</p>
<h3 id="getting-help">Getting help</h3>
<p>There are not many things you can do after starting the program — most require an open file to work upon. One thing one can do is open a file but we will cover that at the next subsection. Another is to show some information about the program itself and the syntax and purpose of each command — getting help.</p>
<p>If we use the <a href="#help">help</a> command without arguments, the program will print all the available commands:</p>
<pre><code>FinCtrl &gt; help

Documented commands (type help &lt;topic&gt;):
========================================
EOF  backup  ch      close  delete  help  ls    set  show    trim
add  bye     change  del    find    list  open  sh   source</code></pre>
<p>We may also obtain help on a specific command by typing <code>help</code> followed by the name of the command. For example, for the <a href="#show">show</a> command:</p>
<pre><code>FinCtrl &gt; help show
Show a specific record&#39;s data:
        &gt; sh[ow] acc[ount] ACCOUNT_NAME|ACCOUNT_ID
        &gt; sh[ow] curr[ency] CURR_NAME
        &gt; sh[ow] settings|manual [inline]|copyright|license [inline]
        &gt; sh[ow] tr[ansaction] TRANSACTION_ID
        &gt; sh[ow] last [NUMBER]</code></pre>
<p>The program will print a brief description of the purpose of the command followed by a list of the command’s allowed syntax. The following conventions apply to every command description:</p>
<ul>
<li>Text between square brackets (<code>[]</code>) is optional — you may enter it or not, as you wish;</li>
<li>Text in lower case letters is mandatory and must be entered as-is;</li>
<li>Several options separated by vertical bars (the <em>pipe</em> character, ‘<code>|</code>’) mean that one and only one of them must be chosen;</li>
<li>Finally, text in capital letters is information that must be provided or chosen by the user — check in the commands’ <a href="#reference">REFERENCE</a> section for the precise type of information required.</li>
</ul>
<p>The third syntax line of the example above explains how to use the <a href="#show">show</a> command to display some information pertaining to the program. The command may be written as <code>show</code> or <code>sh</code> (the bracketed ‘<code>ow</code>’ is optional) and must be followed by only one of the options separated by vertical bars, <code>settings</code>, <code>manual</code>, <code>copyright</code> or <code>license</code>.</p>
<p>For example, to show the program’s copyright information, as we have seen in previous section, we could type:</p>
<pre><code>FinCtrl &gt; show copyright
Finance Control 0.11
(C) 2021 António Manuel Dias &lt;ammdias@gmail.com&gt;
(...)</code></pre>
<p>Both the <code>manual</code> and <code>license</code> information will be shown on a new web browser window, assuming a browser is installed on your system:</p>
<pre><code>FinCtrl &gt; sh manual
The program&#39;s manual should be displayed in your browser.
If this doesn&#39;t happen, please use the command:
    &gt; show manual inline</code></pre>
<p>The commands above take an optional argument, “<code>inline</code>”, that directs the program to print the manual or license in the terminal instead of a web browser:</p>
<pre><code>FinCtrl &gt; sh manual inline
FINANCE CONTROL MANUAL
======================

This is a very basic program to control personal finances.  It depends on
(...)</code></pre>
<p>Finally, we could also show the current program settings, but as they are specific to each file (and kept in it), this command terminates with an error message:</p>
<pre><code>FinCtrl &gt; sh settings
*** Error: &#39;show&#39; command needs an open file.</code></pre>
<p>The next section will cover how to work with files.</p>
<h3 id="creating-and-opening-a-file">Creating and opening a file</h3>
<p>As stated earlier, the program keeps all information in <a href="https://sqlite.org">SQLite</a> files. To open a file we use the <a href="#open">open</a> command:</p>
<pre><code>FinCtrl &gt; open test.sqlite
test.sqlite &gt; </code></pre>
<p>The <a href="#open">open</a> command takes a single argument, the path to the file to be opened. If a relative path is given, the directory where the program was started will be the base directory. The tilde (<code>~</code>) may be used in substitution of the user’s home absolute path. For example, in my case, if I used the command <code>open ~/doc/accounting.sqlite</code> the opened file would be <code>/home/antonio/doc/accounting.sqlite</code>. This is standard Unix notation, but may also be used in other systems.</p>
<p>I used the <code>.sqlite</code> extension because this way I can at a glance identify this as an SQLite file when I list my system’s directory, but the program doesn’t require any particular extension and you may even use files without one.</p>
<p>If the file does not exist, it will be created with default settings (more about this in the subsection below). If it exists but is not a Finance Control file, an error will be presented and the file will not be opened:</p>
<pre><code>FinCtrl &gt; open testfile.txt
*** Error: unable to open file. Reason:
    file is not a database</code></pre>
<p>There is no need to close the open file before quitting the program, as all changes are written to the file at the time they are made and the file will be closed automatically. Also, opening a file when another is already opened will close this one previously.</p>
<p>Just for pure program symmetry, a <a href="#close">close</a> command is also available. It will close the current file and return the program to the initial state (no opened files):</p>
<pre><code>test.sqlite &gt; close
FinCtrl &gt; </code></pre>
<p>It is also possible to start the program with an opened file — just pass its path as argument to the program:</p>
<pre><code>$ finctrl test.sqlite
(...)
test.sqlite &gt;</code></pre>
<p>You should have noticed that the prompt changes when a file is opened. The prompt is one of the program’s settings and is stored in each file. If no change has been made, the prompt will be the file name by default.</p>
<h3 id="default-settings">Default settings</h3>
<p>Every opened file has a set of default settings that govern the behaviour of some of the program’s operations. We can find the current file’s settings with the <a href="#show-settings">show settings</a> command (a file must be already opened):</p>
<pre><code>test.sqlite &gt; sh settings
Prompt: test.sqlite &gt; 
Field separator for CSV files: ;
Configured editor: 
Default deposit text: Deposit
Default withdrawal text: Withdrawal
Default transfer text: Transfer
Default currency: default</code></pre>
<p>The settings are:</p>
<ul>
<li><em>Prompt</em>: the prompt to be displayed when the file is opened;</li>
<li><em>Field separator for CSV files</em>: the character used to separate fields when exporting results to a CSV file;</li>
<li><em>Configured editor</em>: the program to edit external text files;</li>
<li><em>Default deposit</em>, <em>withdrawal</em> and <em>transfer text</em>: the text used as description for any of those operations if none is given when issuing the command;</li>
<li><em>Default currency</em>: the name of the currency to be used for any new account if no other is given at the time of creation.</li>
</ul>
<p>All settings may be changed with the respective <a href="#set">set</a> command. For example, to change the prompt:</p>
<pre><code>test.sqlite &gt; set prompt &#39;Test &gt; &#39;
Test &gt; </code></pre>
<p>Notice that the new prompt is given between quotes. The reason for this is that it contains spaces and would be interpreted as two different arguments if not enveloped in quotes, which would result in an error:</p>
<pre><code>Test &gt; set prompt Test &gt;
*** Error: &#39;set prompt&#39; command takes a single argument:
    &gt; set prompt TEXT</code></pre>
<p>Most syntax error messages will also show the proper syntax of the command.</p>
<p>After changing the prompt, this setting will be preserved in the file and will be used every time it is opened. The other settings may be changed in the same way. To change the default currency, the name of an existing currency must be used, otherwise an error will be shown:</p>
<pre><code>Test &gt; set currency euro
*** Error: unable to set currency. Reason:
    Currency not found.</code></pre>
<h3 id="currencies">Currencies</h3>
<p>In this program’s context, a currency is just a collection of settings to correctly display and scan monetary amounts. We can list the configured currencies with the <a href="#list-currencies">list currencies</a> command:</p>
<pre><code>Test &gt; list currencies

Name    | Short name | Symbol | Position | Decimal places | Decimal separator
--------+------------+--------+----------+----------------+------------------
default |            |        | left     | 2              | .                </code></pre>
<p>There is always at least one configured currency, named <code>default</code>. We can check a currency settings with the <a href="#show-currency">show currency</a> command:</p>
<pre><code>Test &gt; sh curr default
Name: default
Short name: 
Symbol: 
Symbol position: left
Decimal places: 2
Decimal separator: .</code></pre>
<p>These are the properties of a currency:</p>
<ul>
<li><em>Name</em>: the name for which the currency is known in the program. You will need this name every time you have to identify the currency, for example, to assign it to an account.</li>
<li><em>Short name</em>: this is the abbreviation for the currency, like EUR for Euro or USD for United States Dollar. Currently it has no purpose in the program.</li>
<li><em>Symbol</em>: the currency symbol, like ‘€’ for Euro. Currently it is not used by the program.</li>
<li><em>Position</em>: the position of the symbol when writing an amount. Must be <code>left</code> or <code>right</code>. Also with no current use in the program.</li>
<li><em>Decimal places</em>: this indicates the precision of the currency. All amounts will be stored and displayed with this precision. When entering an amount, only the decimal places configured in the respective currency will be stored — all remaining decimal places will be discarded.</li>
<li><em>Decimal separator</em>: this is the symbol used to split a currency amount integer and decimal parts. It will be used to display all currency quantities and to scan the quantities input by the user.</li>
</ul>
<p>If all your accounts are in the same currency, you may use the default and just change its settings as you desire. If not or if you prefer to have the currency name correspond to its actual name, you must use the <a href="#add-currency">add currency</a> command. Let’s add the Euro currency to the Test file:</p>
<pre><code>Test &gt; add curr Euro short EUR symbol € position right
Test &gt; </code></pre>
<p>The only required argument is the name of the currency to add, all others are optional. If an argument is not given, the corresponding value from the <code>default</code> currency will be used. We may confirm this showing the properties of the currency we just added and comparing it to the default:</p>
<pre><code>Test &gt; sh curr euro
Name: Euro
Short name: EUR
Symbol: €
Symbol position: right
Decimal places: 2
Decimal separator: .</code></pre>
<p>Notice that although the first letter of the actual name of the currency is in upper case we may use all lower case letters when identifying it to a command. The names of currencies and accounts are not case-sensitive.</p>
<p>To change one of the values, we use the <a href="#change-currency">change currency</a> command:</p>
<pre><code>Test &gt; ch curr euro decsep ,
Test &gt;
Test &gt; sh curr euro
Name: Euro
Short name: EUR
Symbol: €
Symbol position: right
Decimal places: 2
Decimal separator: ,</code></pre>
<p>The euro decimal separator was changed to a comma.</p>
<p>Finally, we may want to make the Euro currency the default to be used on any new account. For this we use the <a href="#set-currency">set currency</a> command:</p>
<pre><code>Test &gt; set curr euro
Test &gt; 
Test &gt; sh settings
Prompt: Test &gt; 
Field separator for CSV files: ;
Configured editor: 
Default deposit text: Deposit
Default withdrawal text: Withdrawal
Default transfer text: Transfer
Default currency: Euro</code></pre>
<h3 id="accounts-and-transactions">Accounts and Transactions</h3>
<p>For the purpose of this program, accounts are the entities where money is stored. They will always have a balance, which is the total amount available, and a <em>current</em> balance, which is the amount available at the current date. We can list the available accounts with the <a href="#list-accounts">list accounts</a> command:</p>
<pre><code>Test &gt; list accounts
*** Error: Empty set</code></pre>
<p>Because none is configured yet, we get an error. To add an account we use the appropriately named command <a href="#add-account">add account</a>. The only required argument to this command is the name of the account to be created, but we may also give it a description and the currency that the account is in. Let’s create two accounts, a <em>bank account</em> and a <em>pocket account</em>, for the hard currency we have with us:</p>
<pre><code>Test &gt; add account Pocket
Test &gt; add acc Bank descr &#39;My bank account&#39;
Test &gt;
Test &gt; ls acc

ID | Name   | Description     | Balance
---+--------+-----------------+--------
 1 | Pocket |                 |    0,00
 2 | Bank   | My bank account |    0,00</code></pre>
<p>When adding the <em>Pocket</em> account, I only provided its name and so the account was created with no description, but for the <em>Bank</em> account (see that I used the short command form, <code>add acc</code>) I gave it a description. Both accounts were created using the currency that we had set as default above, <em>Euro</em>. One obvious hint of this is the decimal separator on the balances listed by the command <code>ls acc</code> (short for <a href="#list-accounts">list accounts</a>). If we now change the <em>Euro</em> currency separator back to the decimal point symbol and list the accounts again, the balances will reflect this change:</p>
<pre><code>Test &gt; ch curr euro decsep .
Test &gt; ls acc

ID | Name   | Description     | Balance
---+--------+-----------------+--------
 1 | Pocket |                 |    0.00
 2 | Bank   | My bank account |    0.00</code></pre>
<p>Every change we make on a currency will be reflected on all accounts using that currency. To find all the details about an account, we use the <a href="#show-account">show account</a> command:</p>
<pre><code>Test &gt; show account bank
Account ID: 2
Name: Bank
Description: My bank account
Currency: Euro
Balance (current): 0.00 (---)</code></pre>
<p>All accounts may be identified by their name (not case-sensitive) or ID number. For example, to show the details of the <em>Pocket</em> account:</p>
<pre><code>Test &gt; sh acc 1
Account ID: 1
Name: Pocket
Description: 
Currency: Euro
Balance (current): 0.00 (---)</code></pre>
<p>The <em>current balance</em> is the balance at the present date that may be different from the account balance if there are future transactions already entered (e.g. when you know some amount will be withdrawn from an account at a specific date on the future, you may enter that before the transaction actually happens).</p>
<p>Once we have our accounts set, we can start really using the program for its intended purpose, tracking our personal earnings and expenses. Every operation on each of the accounts is a <em>transaction</em> and may be split into several <em>parcels</em>. For example, on a single trip to the supermarket one may buy sugar, chocolate, flour, eggs and butter to make a chocolate cake. Each of those items would be a <em>parcel</em> and the sum of the parcels would comprise a <em>transaction</em>. Every transaction must have at least one parcel, although for transactions with a single parcel there are shortcut commands to avoid having to declare the parcel explicitly. If this seems unclear, I hope when you start using the program everything will become clear enough, so let’s do that.</p>
<p>The first thing we must do is insert the initial amounts of each account.</p>
<pre><code>Test &gt; add transaction on pocket description &#39;Initial amount&#39; \
     : date 2024-01-01 \
     : parcel &quot;&#39;Initial amount&#39; 123.45 tags &#39;carry-over&#39;&quot;
Transaction id: 1
Test &gt; </code></pre>
<p>This is the use of the <a href="#add-transaction">add transaction</a> command in its full splendor, so let me explain it in detail. The first thing to notice is that it is a multi-line command: by placing a backslash character at the end of the first two lines I tell the program that the command is not complete and carries on to the next.</p>
<p>Also of notice is that I used no <em>positional arguments</em>: all user-provided data was entered by means of <em>keyword arguments</em>, some of which are required and others optional. The help page on this command is as follows:</p>
<pre><code>&gt; add tr[ansaction] on ACCOUNT_NAME|ACCOUNT_ID \
:                   [neg] [descr[iption] TEXT] [date DATE] \
:                   of AMOUNT | parcel &quot;TEXT AMOUNT [tags LIST]&quot; ...</code></pre>
<p>We can see that the <code>on</code> argument is required as is one (but not both) of the arguments <code>of</code> or <code>parcel</code>. <code>neg</code>, <code>description</code> and <code>date</code> are optional. Let me detail the arguments used above:</p>
<ul>
<li><strong>on</strong>: the account on which the transaction will be added, in this case the <em>Pocket</em> account;</li>
<li><strong>description</strong>: the description of this transaction that will be shown when listing transactions, in this case <em>Initial amount</em> which, because it has a space, must be enveloped in quotes;</li>
<li><strong>date</strong>: the date on which the transaction will be effective;</li>
<li><strong>parcel</strong>: the data of the single parcel of this transaction.</li>
</ul>
<p>The <strong>parcel</strong> argument is a bit complex and deserves a detailed explanation of its own. In fact, it is almost like a command within <a href="#add-transaction">add transaction</a> as its purpose is to add a parcel to it. If the transaction had multiple parcels, each one would have its own <strong>parcel</strong> argument. We will see examples of transactions with multiple parcels later.</p>
<p>This <em>pseudo-command</em> has two required positional arguments: <code>TEXT</code>, the description of the parcel (here, the same as the transaction description, <em>Initial amount</em>), and <code>AMOUNT</code>, the amount of the parcel. It may also have a keyword argument, <code>tags</code>, which must be a comma-separated list of the tags to add to this parcel.</p>
<p>A very important fact to not forget when adding a parcel on the <a href="#add-transaction">add transaction</a> command is that the whole parcel data must be within quotes. This is because the interpreter must perceive the complete data as a single argument. Forgetting the quotes will result in an error being reported. Because of this, if the parcel description or any of the tags have spaces, they must also be enveloped in quotes — the other kind of the quotes used for the complete parcel data. That is why the parcel description above is within single-quotes and the parcel data within double-quotes.</p>
<p>The optional arguments not used in this example were:</p>
<ul>
<li><strong>neg</strong>: the only positional argument of the command, if used, would make all parcel amounts negative — this may be nice when entering a complex bill, for example, so that the user doesn’t need to keep adding the minus symbol to all the monetary values;</li>
<li><strong>of</strong>: this argument could actually have been used here — it means that the transaction has a single parcel that will be added automatically with the amount and description of the whole transaction.</li>
</ul>
<p>An easier way to add an amount to an account would be to use the <a href="#add-deposit">add deposit</a> command. This is a shortcut to the previous command and takes this form:</p>
<pre><code>&gt; add deposit of AMOUNT on ACCOUNT_NAME|ACCOUNT_ID \
:             [descr[iption] TEXT] [date DATE] [tags LIST]</code></pre>
<p>Let’s use it to add the initial amount to the <em>Bank</em> account:</p>
<pre><code>Test &gt; add deposit of 5000 on bank date 1/1
Transaction id: 2</code></pre>
<p>You should have noticed that each time we add a transaction, the program answers with the transaction identification. We need this number every time we have to refer to the transaction, like when we want to see its details with the <a href="#show-transaction">show transaction</a> command:</p>
<pre><code>Test &gt; sh tr 2
Account: Bank (id: 2)
Description: Deposit
Total amount: 5000.00
Date: 2024-01-01
Parcels:
  (2) Deposit: 5000.00</code></pre>
<p>Note that the description of the transaction (and also the implied parcel) was set to <em>Deposit</em>. This is due to one of the <a href="#default-settings">default settings</a>, the <em>default deposit text</em>. We could have set a different transaction description with the <code>description</code> keyword and even add tags to the implied parcel using the <code>tags</code> keyword.</p>
<p>Now that we have some transactions, we may list them all using the <a href="#list-transactions">list transactions</a> command:</p>
<pre><code>Test &gt; ls tr

Account | Id | Date       | Description    | Total amount | Account balance
--------+----+------------+----------------+--------------+----------------
Bank    |  2 | 2024-01-01 | Deposit        |      5000.00 |         5000.00
Pocket  |  1 | 2024-01-01 | Initial amount |       123.45 |          123.45

Total amounts by currency:
    Euro: 5123.45</code></pre>
<p>There is also a shortcut command to take some amount from an account, <a href="#add-withdrawal">add withdrawal</a>:</p>
<pre><code>Test &gt; add withdrawal on bank of 59.99 date 1/2 \
     : descr &#39;Phone bill, Jan. 2024&#39; tags phone,comms
Transaction id: 3</code></pre>
<p>Some noteworthy things on this transaction:</p>
<ul>
<li><p>We may swap the order of the command arguments as I did here — only the <em>positional arguments</em> need to appear on a specific order;</p></li>
<li><p>I added two tags to the transaction, <em>phone</em> and <em>comms</em> — this will allow us to list operations by tag, to better keep track on our spendings on specific items or categories (we will cover that topic later).</p></li>
</ul>
<p>Actually, the tags are added to the implied parcel, as we may see in the details of the transaction and have already seen in the full <code>add transaction</code> command:</p>
<pre><code>Test &gt; sh tr 3
Account: Bank (id: 2)
Description: Phone bill, Jan. 2024
Total amount: -59.99
Date: 2024-01-02
Parcels:
  (3) Phone bill, Jan. 2024: -59.99 (comms, phone)
  </code></pre>
<p>Here, we may also see that although the amount given to the command was positive (<em>59.99</em>), the transaction amount is negative. This is the purpose of having a shortcut command to describe a <em>deposit</em> and another to describe a <em>withdrawal</em>.</p>
<p>There is one final shortcut transaction command, <a href="#add-transfer">add transfer</a>, that moves an amount from one account to another. If I took 10 Euro from my bank account on a ATM I could use this command to describe the operation:</p>
<pre><code>Test &gt; add transfer of 10 from bank to pocket date 1/3 \
     : descr &#39;ATM withdrawal&#39;
Transaction ids: 4, 5</code></pre>
<p>Wait! Why were two transactions added this time if I only issued one command? We may show the details of the transactions with the <a href="#show-transaction">show transaction</a> command, as we have done above, but there is another command specifically to show the details of the last transactions, <a href="#show-last">show last</a>. To show the last two transactions we do:</p>
<pre><code>Test &gt; show last 2
Transaction: 4
Account: Bank (id: 2)
Description: ATM withdrawal
Total amount: -10.00
Date: 2024-01-03
Parcels:
  (4) ATM withdrawal: -10.00

Transaction: 5
Account: Pocket (id: 1)
Description: ATM withdrawal
Total amount: 10.00
Date: 2024-01-03
Parcels:
  (5) ATM withdrawal: 10.00

Test &gt;</code></pre>
<p>As can be seen, there is a transaction on the <em>Bank</em> account and another on the <em>Pocket</em> account, which makes sense. The <a href="#show-last">show last</a> command takes only one argument, the number of transactions to show. If ommited, it will show just the last transaction.</p>
<p>We could also have listed the transactions:</p>
<pre><code>Test &gt; ls tr

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Pocket  |  5 | 2024-01-03 | ATM withdrawal        |        10.00 |          133.45
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2024 |       -59.99 |         4940.01
Bank    |  2 | 2024-01-01 | Deposit               |      5000.00 |         5000.00
Pocket  |  1 | 2024-01-01 | Initial amount        |       123.45 |          123.45

Total amounts by currency:
    Euro: 5063.46</code></pre>
<p>This listing also shows some important features of transaction listings:</p>
<ul>
<li>The transactions are listed from the most recent down to the most ancient. To list in reverse order (from the most ancient to the most recent), use the <code>rev</code> keyword: <code>list transactions rev</code> (or <code>ls tr rev</code>).</li>
<li>The account balance is the amount available on each account after the operation has taken place.</li>
<li>The ‘Total amounts by currency’ is a list of the sum of the ‘Total amount’ column, by currency. As all the transactions listed belong to accounts with the same currency, Euro, only one value is listed.</li>
</ul>
<p>Probably it makes more sense to list the transactions on a single account, and we may do that:</p>
<pre><code>Test &gt; ls tr on bank

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2021 |       -59.99 |         4940.01
Bank    |  2 | 2024-01-01 | Deposit               |      5000.00 |         5000.00

Total amounts by currency:
    Euro: 4930.01</code></pre>
<p>We may also list transactions on multiple accounts, although with only two it is the same as entering no account:</p>
<pre><code>Test &gt; ls tr on bank,pocket

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Pocket  |  5 | 2024-01-03 | ATM withdrawal        |        10.00 |          133.45
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2024 |       -59.99 |         4940.01
Bank    |  2 | 2024-01-01 | Deposit               |      5000.00 |         5000.00
Pocket  |  1 | 2024-01-01 | Initial amount        |       123.45 |          123.45    

Total amounts by currency:
    Euro: 5063.46</code></pre>
<p>Although there is no need with so few transactions, we may also set a date interval on the transactions listed:</p>
<pre><code>Test &gt; ls tr on bank from 1/2 to today

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2021 |       -59.99 |         4940.01

Total amounts by currency:
    Euro: -69.99</code></pre>
<p>If the <code>from</code> date is omitted, the listing starts at the first transaction; if instead the <code>to</code> date is omitted, the listing ends in the most recent recorded transaction. As we have seen earlier, if we give no date interval, all transactions are listed. “<code>today</code>” (or “<code>now</code>”) are just shortcuts for the present date (remember that you may add transactions for future dates).</p>
<p>Or you may list the last <em>n</em> transactions with the <code>top</code> option:</p>
<pre><code>Test &gt; ls tr top 3

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Pocket  |  5 | 2024-01-03 | ATM withdrawal        |        10.00 |          133.45
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2021 |       -59.99 |         4940.01

Total amounts by currency:
    Euro: -59.99</code></pre>
<p>Sometimes, it is more pratical to list the transactions from the most ancient to the most recent. You may do that with the <code>rev</code> option:</p>
<pre><code>Test &gt; ls tr on bank from 1/2 to today rev

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2021 |       -59.99 |         4940.01
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01

Total amounts by currency:
    Euro: -69.99</code></pre>
<p>Finally, there is the option of listing all transactions with a certain amount, using the <code>of</code> argument. This option may be used with several accounts, as long as they all have the same currency. When the accounts have different currencies, an error will be displayed.</p>
<p>Test &gt; ls tr of -10</p>
<table>
<thead>
<tr class="header">
<th>Account</th>
<th>Id</th>
<th>Date</th>
<th>Description</th>
<th>Total amount</th>
<th>Account balance</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Bank</td>
<td>4</td>
<td>2024-01-03</td>
<td>ATM withdrawal</td>
<td>-10.00</td>
<td>4930.01</td>
</tr>
</tbody>
</table>
<p>Total amounts by currency: Euro: -10.00</p>
<p>We now have seen all the shortcut commands that allow us to add a single parcel transaction. To add transactions with multiple parcels we have two commands, <a href="#add-expense">add expense</a> and the <code>add transaction</code> that we have covered above. They are basically the same, the only difference being that the former will automatically turn all parcel amounts to negative values, which is handy when you are adding some kind of bill. Of course, you could do the same with the <code>add transaction</code> command together with the <code>neg</code> argument. Let’s add the bill from the supermarket trip to buy the ingredients for the chocolate cake mentioned earlier:</p>
<ul>
<li>6 eggs, 0.85€</li>
<li>1Kg baking flour, 0.45€</li>
<li>1Kg refined sugar, 0.69€</li>
<li>250g butter, 1.39€</li>
<li>200g black chocolate, 1.49€</li>
</ul>
<p>We will use the <code>add expense</code> command:</p>
<pre><code>Test &gt; add expense on bank descr Supermarket date 1/4 \
     : parcel &quot;eggs 0.85 tags food,grocery&quot; \
     : parcel &quot;&#39;baking flour&#39; 0.45 tags food,grocery&quot; \
     : parcel &quot;sugar 0.69 tags food,grocery&quot; \
     : parcel &quot;butter 1.39 tags food,breakfast&quot; \
     : parcel &quot;chocolate 1.49 tags food,sweets&quot;
Transaction id: 6</code></pre>
<p>To check if the transaction was inserted correctly, we can list the last transaction of the corresponding account:</p>
<pre><code>Test &gt; ls tr on bank top 1

Account | Id | Date       | Description | Total amount | Account balance
--------+----+------------+-------------+--------------+----------------
Bank    |  6 | 2024-01-04 | Supermarket |        -4.87 |         4925.14

Total amounts by currency:
    Euro: -4.87</code></pre>
<p>It seems alright, but we may also display the complete transaction:</p>
<pre><code>Test &gt; sh last
Transaction: 6
Account: Bank (id: 2)
Description: Supermarket
Total amount: -4.87
Date: 2024-01-04
Parcels:
  (6) eggs: -0.85 (food, grocery)
  (7) baking flour: -0.45 (food, grocery)
  (8) sugar: -0.69 (food, grocery)
  (9) butter: -1.39 (breakfast, food)
  (10) chocolate: -1.49 (food, sweets)</code></pre>
<h3 id="correcting-mistakes">Correcting mistakes</h3>
<p>It is human to err and that will probably happen a lot if you use this program. Therefore, the program offers two general commands to correct the mistakes the user can make, <a href="#change">change</a> and <a href="#delete">delete</a>, and two special commands that allow us to expand some transaction already entered, <a href="#add-parcel">add parcel</a> and <a href="#add-tag">add tag</a>. We’ll start with these.</p>
<p>If, when adding an expense, we forget a parcel it is possible to add it afterwards with the command <a href="#add-parcel">add parcel</a> — we only need to know the transaction identification. For example, when listing the last transaction of the section above we may notice that the total amount is different from the amount on the receipt. Double-checking this we find that we forgot to add the baking powder parcel. Let’s correct that adding that parcel to transaction 6:</p>
<pre><code>Test &gt; add parcel &#39;baking powder&#39; of 0.85 to 6
Test &gt; sh tr 6
Account: Bank (id: 2)
Description: Supermarket
Total amount: -4.02
Date: 2024-01-04
Parcels:
  (6) eggs: -0.85 (food, grocery)
  (7) baking flour: -0.45 (food, grocery)
  (8) sugar: -0.69 (food, grocery)
  (9) butter: -1.39 (breakfast, food)
  (10) chocolate: -1.49 (food, sweets)
  (11) baking powder: 0.85</code></pre>
<p>Oops, it seems I forgot to add the parcel tags and that the value must be negative like the others. No problem, we may also change that. First, we add the missing tags to parcel 11 (the baking powder, as listed in the <code>show transaction</code> output) with the <a href="#add-tag">add tag</a> command:</p>
<pre><code>Test &gt; add tag food to 11
Test &gt; add tag grocery to 11</code></pre>
<p>And now we use the <a href="#change-parcel">change parcel</a> command to change the amount of the same parcel:</p>
<pre><code>Test &gt; ch parcel 11 amount to -0.85</code></pre>
<p>Printing the details on transaction 6 we can see that all is ok now:</p>
<pre><code>Test &gt; sh tr 6
Account: Bank (id: 2)
Description: Supermarket
Total amount: -5.72
Date: 2024-01-04
Parcels:
  (6) eggs: -0.85 (food, grocery)
  (7) baking flour: -0.45 (food, grocery)
  (8) sugar: -0.69 (food, grocery)
  (9) butter: -1.39 (breakfast, food)
  (10) chocolate: -1.49 (food, sweets)
  (11) baking powder: -0.85 (food, grocery)</code></pre>
<p>The <a href="#change-parcel">change parcel</a> command may also be used to change a parcel’s description:</p>
<pre><code>Test &gt; ch parcel 8 descr to &#39;refined sugar&#39;
Test &gt; sh tr 6
Account: Bank (id: 2)
Description: Supermarket
Total amount: -5.72
Date: 2024-01-04
Parcels:
  (6) eggs: -0.85 (food, grocery)
  (7) baking flour: -0.45 (food, grocery)
  (8) refined sugar: -0.69 (food, grocery)
  (9) butter: -1.39 (breakfast, food)
  (10) chocolate: -1.49 (food, sweets)
  (11) baking power: -0.85 (food, grocery)</code></pre>
<p>Another thing we can change is a tag name, but beware this will change this tag for all parcels! Just for an example, let’s change <em>breakfast</em> to <em>snacks</em>:</p>
<pre><code>Test &gt; ch tag breakfast to snacks
Test &gt; sh tr 6
Account: Bank (id: 2)
Description: Supermarket
Total amount: -5.72
Date: 2024-01-04
Parcels:
  (6) eggs: -0.85 (food, grocery)
  (7) baking flour: -0.45 (food, grocery)
  (8) refined sugar: -0.69 (food, grocery)
  (9) butter: -1.39 (food, snacks)
  (10) chocolate: -1.49 (food, sweets)
  (11) baking power: -0.85 (food, grocery)</code></pre>
<p>All parcels tagged with <em>breakfast</em> would now be tagged with <em>snacks</em> which may not be what you intended… If what you intended was to remove the tag <em>breakfast</em> from parcel 9 only and to replace it with the tag <em>snacks</em> you could have used the <a href="#delete-tag">delete tag</a> command and then <a href="#add-tag">add tag</a>. Let’s use this method to change the tag on the butter parcel from <em>snacks</em> to <em>dairy</em>:</p>
<pre><code>Test &gt; delete tag snacks from 9
Test &gt; add tag dairy to 9
Test &gt; sh tr 6
Account: Bank (id: 2)
Description: Supermarket
Total amount: -5.72
Date: 2024-01-04
Parcels:
  (6) eggs: -0.85 (food, grocery)
  (7) baking flour: -0.45 (food, grocery)
  (8) refined sugar: -0.69 (food, grocery)
  (9) butter: -1.39 (dairy, food)
  (10) chocolate: -1.49 (food, sweets)
  (11) baking powder: -0.85 (food, grocery)</code></pre>
<p><a href="#delete-tag">delete tag</a> without a parcel number will delete the referred tag from <strong>all parcels</strong>.</p>
<p>Another variant of the <a href="#change">change</a> command is <a href="#change-transaction">change transaction</a> and it may be used, for example, to change a transaction description:</p>
<pre><code>Test &gt; ls tr

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
(...)
Bank    |  2 | 2024-01-01 | Deposit               |      5000.00 |         5000.00
(...)

Test &gt; change transaction 2 description to &#39;Initial amount&#39;
Test &gt; ls tr

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
(...)
Bank    |  2 | 2024-01-01 | Initial amount        |      5000.00 |         5000.00
(...)</code></pre>
<p>More useful is probably changing a transaction from one account to another. Let’s say that we payed the chocolate ingredients in coin and not directly from the bank. To correct this we need to change transaction 6 to the <em>Pocket</em> account:</p>
<pre><code>Test &gt; ls tr

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Bank    |  6 | 2024-01-04 | Supermarket           |        -5.72 |         4924.29
Pocket  |  5 | 2024-01-03 | ATM withdrawal        |        10.00 |          133.45
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2024 |       -59.99 |         4940.01
Bank    |  2 | 2024-01-01 | Initial amount        |      5000.00 |         5000.00
Pocket  |  1 | 2024-01-01 | Initial amount        |       123.45 |          123.45

Total amounts by currency:
    Euro: 5057.74

Test &gt; 
Test &gt; ch tr 6 account to pocket
Test &gt; ls tr

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Pocket  |  6 | 2024-01-04 | Supermarket           |        -5.72 |          127.73
Pocket  |  5 | 2024-01-03 | ATM withdrawal        |        10.00 |          133.45
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2024 |       -59.99 |         4940.01
Bank    |  2 | 2024-01-01 | Initial amount        |      5000.00 |         5000.00
Pocket  |  1 | 2024-01-01 | Initial amount        |       123.45 |          123.45

Total amounts by currency:
    Euro: 5057.74</code></pre>
<p>On the first listing, transaction 6 (the supermarket bill) was on the <em>Bank</em> account and, after the <a href="#change-transaction">change transaction</a> command it is now on the <em>Pocket</em> account — all accounting operations were automatically done. Changing the date would be done in the same way.</p>
<p>Changing accounts and currencies is similar, with the <a href="#change-account">change account</a> and <a href="#change-currency">change currency</a> commands. The only things that cannot be changed is a currency’s name and an account’s currency. Here’s an example on how to change an account’s description:</p>
<pre><code>Test &gt; ch acc pocket descr to &#39;Money with me&#39;
Test &gt; ls acc

ID | Name   | Description     | Balance
---+--------+-----------------+--------
 1 | Pocket | Money with me   |  127.73
 2 | Bank   | My bank account | 4930.01

Total balances by currency:
    Euro: 5057.74</code></pre>
<p>The last general command to correct mistakes is the <a href="#delete">delete</a> command. We already covered both versions of the <a href="#delete-tag">delete tag</a> command above and although the remaining delete commands are very similar, there are some issues that must be mentioned for each one of them.</p>
<p><a href="#delete-parcel">delete parcel</a> and <a href="#delete-transaction">delete transaction</a> take the identification number of the item to remove and will remove it permanently from the database: there is no way to recover them other than entering all its data again!</p>
<p>Previously I said that every transaction must have at least one parcel: well, that is generally true and logic but you <em>can</em> remove the last parcel from a transaction with the <code>delete parcel</code> command. The transaction will be empty and its total amount zero:</p>
<pre><code>Test &gt; sh tr 3
Account: Bank (id: 2)
Description: Phone bill, Jan. 2024
Total amount: -59.99
Date: 2024-01-02
Parcels:
  (3) Phone bill, Jan. 2024: -59.99 (comms, phone)
  
Test &gt; 
Test &gt; del parcel 3
Test &gt; sh tr 3
Account: Bank (id: 2)
Description: Phone bill, Jan. 2024
Total amount: 0.00
Date: 2024-01-02
Parcels:

Test &gt;</code></pre>
<p>I don’t know how this could be useful, but… it’s possible. The only way to revert it now is to enter the data again. Nevertheless, the parcel ID will be different — it’s a new parcel:</p>
<pre><code>Test &gt; add parcel &#39;Phone bill, Jan. 2024&#39; \
     : of -59.99 to 3 tags &#39;comms, phone&#39;
Test &gt; sh tr 3
Account: Bank (id: 2)
Description: Phone bill, Jan. 2024
Total amount: -59.99
Date: 2024-01-02
Parcels:
  (12) Phone bill, Jan. 2024: -59.99 (comms, phone)</code></pre>
<p><a href="#delete-account">delete account</a> works in the same way, taking the account identification number or account name and removing the account permanently. However, extra care should be taken when using this command, as it will also remove all of the account’s transactions (and their parcels, of course). If you really want to remove an account, be sure that you don’t have any relevant information in its transactions!</p>
<h3 id="listing-and-exporting-data">Listing and exporting data</h3>
<p>In the previous sections of this manual we already covered various forms of the <a href="#list">list</a> command, like <a href="#list-currencies">list currencies</a> and <a href="#list-accounts">list accounts</a>. There is only one detail we didn’t mention: we may pass a currency or account name, respectively, to list only that currency or account instead of all of them. In short, it’s just an alternative way of visualizing the data to the <a href="#show">show</a> command:</p>
<pre><code>Test &gt; ls acc bank

ID | Name | Description     | Balance
---+------+-----------------+--------
 2 | Bank | My bank account | 4930.01

Total balances by currency:
    Euro: 4930.01</code></pre>
<p>We also covered in some detail the <a href="#list-transactions">list transactions</a> command with both its filtering options, account and date. The two remaining list commands are related to tags: <a href="#list-parcels">list parcels</a> and <a href="#list-tags">list tags</a>. With the first you may list all parcels with certain tags:</p>
<pre><code>Test &gt; ls parcels tagged grocery,dairy

Id | Date       | Account | Trans | Description   | Amount
---+------------+---------+-------+---------------+-------
11 | 2024-01-04 | Pocket  |     6 | baking powder |  -0.85
 9 | 2024-01-04 | Pocket  |     6 | butter        |  -1.39
 8 | 2024-01-04 | Pocket  |     6 | refined sugar |  -0.69
 7 | 2024-01-04 | Pocket  |     6 | baking flour  |  -0.45
 6 | 2024-01-04 | Pocket  |     6 | eggs          |  -0.85

Total amounts by currency:
    Euro: -4.23</code></pre>
<p>This command may also be filtered by date, with the keywords <code>from</code>, <code>to</code> and <code>top</code>, like <code>list transactions</code>. Note that you also get the total amount for that listing – and this is how we may find how much we are spending on certain items on a certain period of time.</p>
<p><a href="#list-tags">list tags</a> lists all tags in use and their <em>frequency</em> — the number of parcels tagged with each particular tag:</p>
<pre><code>Test &gt; ls tags

Tag        | Frequency
-----------+----------
carry-over |         1
comms      |         1
dairy      |         1
food       |         6
grocery    |         4
phone      |         1
sweets     |         1</code></pre>
<p>The <a href="#find">find</a> command allows us to list transactions or parcels that contain a specific piece of text in their description. For example, if we wanted to list all initial transactions in each account, we could search for the text ‘initial’ in the description:</p>
<pre><code>Test &gt; find transactions like initial

Account | Id | Date       | Description    | Total amount | Account balance
--------+----+------------+----------------+--------------+----------------
Bank    |  2 | 2024-01-01 | Initial amount |      5000.00 |         5000.00
Pocket  |  1 | 2024-01-01 | Initial amount |       123.45 |          123.45

Total amounts by currency:
    Euro: 5123.45</code></pre>
<p>The command to list all parcels with sugar in their description is very similar:</p>
<pre><code>Test &gt; find parcels like sugar

Id | Date       | Account | Trans | Description   | Amount
---+------------+---------+-------+---------------+-------
 8 | 2024-01-04 | Pocket  |     6 | refined sugar |  -0.69

Total amounts by currency:
    Euro: -0.69</code></pre>
<p>Like the previous commands, the listing of the <a href="#find">find</a> command may also be filtered by date using the <code>from</code>, <code>to</code> and <code>top</code> keywords. Also, the listings may be presented in reverse order with the <code>rev</code> keyword.</p>
<p>Finally, all <a href="#list">list</a> and <a href="#find">find</a> commands accept one keyword argument, <code>tofile</code>, that directs the program to export the data to a <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV file</a>. The keyword must be followed by the file name (same rules apply as to the <a href="#open">open</a> command). CSV files are very portable and supported by several applications and programming languages, if you desire to process the exported data. The command below will export a list of the parcels with tag <code>food</code> to the file <code>food.csv</code> in the current directory:</p>
<pre><code>Test &gt; ls parcels tagged food tofile food.csv</code></pre>
<p>After this you could open the file, for example, with a spreadsheet application like LibreOffice.org Calc, Microsoft Office or even Google Docs. When opening the file, don’t forget to choose the field separator character. For example, when opening the file with Calc I am presented with this dialog:</p>
<figure>
<img src="food.csv.png" alt="" /><figcaption>LibreOffice.org Calc Open CSV dialog</figcaption>
</figure>
<p>Notice that I changed the field separator to a semicolon (the default in this program) and cleared all other options. You may change the character used to separate the fields with the <a href="#set-csvsep">set csvsep</a> command. LibreOffice.org has the nice feature of previewing the content as it will be imported, that allows us to check if everything seems ok.</p>
<h3 id="advanced-usage">Advanced usage</h3>
<p>In the previous sections we covered the basic usage of Finance Control. Here we will skim over the last few bits that could facilitate the continuous usage of the program.</p>
<h4 id="scripting">Scripting</h4>
<p>Using a command line may become tedious and treacherous, especially when entering multi-line commands. Imagine someone inserting a transaction with a long list of parcels and, at the last, discovering that there’s an error in the first that will stop the command to be recognized by the program. It would be frustrating! To stop that from happening the program accepts commands from a separate text file, using the <a href="#source">source</a> command.</p>
<p>The idea is simple: you prepare a simple-text file in your favourite editor, where you can review the commands and correct any mistake, and then use the <a href="#source">source</a> command to insert it into the database. The commands in the text file must match <strong>exactly</strong> the commands you would enter at the program command line. This includes adding a backslash at the end of lines of a multi-line command.</p>
<p>Let’s clarify this with a small example. Create a text file with the content below and name it <code>test.txt</code>:</p>
<pre><code>add expense on pocket \
    descr &quot;Supermarket&quot; date 1/12 \
    parcel &quot;tomatoes 1.29 tags &#39;food,vegetables&#39;&quot; \
    parcel &quot;onions 0.99 tags &#39;food,vegetables&#39;&quot; \
    parcel &quot;lettuce 0.58 tags &#39;food,vegetables&#39;&quot; \
    parcel &quot;cucumber 0.29 tags &#39;food,vegetables&#39;&quot; \
    parcel &quot;&#39;olive oil&#39; 5.45 tags &#39;food,grocery&#39;&quot; \
    parcel &quot;&#39;wine vinegar&#39; 1.05 tags &#39;food,grocery&#39;&quot; \
    parcel &quot;salt 1.25 tags &#39;food,grocery&#39;&quot;

add transfer of 60 from bank to pocket \
    descr &#39;ATM withdrawal&#39; date 1/12</code></pre>
<p>As you can see, these are just two commands, adding the expense of another trip to the supermarket and an ATM withdrawal. After saving the file, open the program and the <code>test.sqlite</code> file we have been working on and then execute the <a href="#source">source</a> command:</p>
<pre><code>Test &gt; source test.txt

add expense on pocket descr &quot;Supermarket&quot; date 1/12 parcel &quot;tomatoes 1.29
tags &#39;food,vegetables&#39;&quot; parcel &quot;onions 0.99 tags &#39;food,vegetables&#39;&quot; parcel
&quot;lettuce 0.58 tags &#39;food,vegetables&#39;&quot; parcel &quot;cucumber 0.29 tags &#39;food,
vegetables&#39;&quot; parcel &quot;&#39;olive oil&#39; 5.45 tags &#39;food,grocery&#39;&quot; parcel &quot;&#39;wine
vinegar&#39; 1.05 tags &#39;food,grocery&#39;&quot; parcel &quot;salt 1.25 tags &#39;food,grocery&#39;&quot;
Transaction id: 7

add transfer of 60 from bank to pocket descr &#39;ATM withdrawal&#39; date 1/12
Transaction ids: 8, 9 </code></pre>
<p>The commands are entered and <em>echoed</em> in the terminal (note the long line of the <code>add expense</code> command). Transactions 7, 8 and 9 were added, as we may confirm list the transactions on the 12th of January:</p>
<pre><code>Test &gt; ls tr from 1/12

Account | Id | Date       | Description    | Total amount | Account balance
--------+----+------------+----------------+--------------+----------------
Pocket  |  9 | 2024-01-12 | ATM withdrawal |        60.00 |          176.83
Bank    |  8 | 2024-01-12 | ATM withdrawal |       -60.00 |         4870.01
Pocket  |  7 | 2024-01-12 | Supermarket    |       -10.90 |          116.83

Total amounts by currency:
    Euro: -10.90</code></pre>
<p>You could also <a href="#show">show</a> any of the transactions to double-check their correctness.</p>
<p>If there was an error in a command in the <em>script</em>, that particular command would not be executed and an error would be displayed in the program’s prompt. To fix that error you need to open the text file and correct it. Remember to remove all the other commands or they will be executed again.</p>
<p>Instead of removing the commands you could also <em>comment them out</em> inserting a semicolon as the first character of each line that you don’t want to execute.</p>
<p>The <a href="#source">source</a> command has an extra option, <code>edit</code>, that automatically opens the file in a text editor and executes it after you save the file and exit the editor. For this to work, the Finance Control program will scan the <code>VISUAL</code> and <code>EDITOR</code> environment variables to find your favorite text editor. If none of those variables are set, or if you’d rather use another editor, you may set the editor you prefer with the <a href="#set-editor">set editor</a> command. For example, if you want to use <em>gedit</em>, the <a href="https://wiki.gnome.org/Apps/Gedit">GNOME text editor</a>, you would enter:</p>
<pre><code>Test &gt; set editor gedit</code></pre>
<p>And, to edit and then execute the script above:</p>
<pre><code>Test &gt; source edit test.txt</code></pre>
<p>If all your work on the program is just executing a script, you could even pass it as an argument to the program itself. Consider this simple example (save it as test-1.txt):</p>
<pre><code>open test.sqlite
add deposit of 150 on bank descr &#39;Lottery prize&#39; \
    date 1/15
ls tr on bank from 1/1 to today tofile bank.csv</code></pre>
<p>First, note that we start by opening the database file, then add a transaction and finish by exporting the <em>Bank</em> account data to a <code>bank.csv</code> CSV file. Now we can pass this to the program directly from the system prompt:</p>
<pre><code>$ finctrl --source test-1.txt</code></pre>
<p>The <code>--source</code> (or just <code>-s</code>) option of the Finance Control program tells it to open the program, execute the commands in the file and finally quit the program (check if the <code>bank.csv</code> file was created and that it is correct).</p>
<p>Of course, you could get the same effect redirecting the program’s input stream to the file, if your operating system supports it:</p>
<pre><code>$ finctrl &lt; test-1.txt</code></pre>
<p>Passing the script this way would not print the executed commands on the terminal. If you want that to happen, add “<code>set echo on</code>” to the top of the text file (see the <a href="#set-echo">set echo</a> reference page for details on this command).</p>
<h4 id="backup-and-trim-the-database">Backup and trim the database</h4>
<p>After a good amount of time using the program, a lot of data will be collected and that could become a nuisance. For example, that means you always have to filter listings on starting date, to ignore old data. To overcome this problem you may use the <a href="#trim">trim</a> command to remove old, unnecessary data. This command has two forms: <a href="#trim-account">trim account</a>, that operates on a single account, and <a href="#trim-storage">trim storage</a>, which will trim the complete database.</p>
<p>Trim will remove all transactions (and their parcels, of course) from the first up to (and including) the date the user indicates, preserving the affected accounts balance. If no transaction remains on an account, a <em>carry-over</em> transaction will be created with an amount identical to the account balance on that date.</p>
<p>A good practice before using the <code>trim</code> command is to backup the database. The easiest way to do this is just copying the file using the operating system’s tools, but you may also do it from inside the program, with the <a href="#backup">backup</a> command. Let’s see a practical example of the usage of these two commands with our little database.</p>
<pre><code>Test &gt; backup test-20240115.sqlite</code></pre>
<p>This command will backup the current database to the file passed as argument (same rules for the file name as in the <a href="#open">open</a> command). We may immediately test the backup, opening it in the program:</p>
<pre><code>Test &gt; open test-20240115.sqlite
Test &gt; ls acc

ID | Name   | Description     | Balance
---+--------+-----------------+--------
 1 | Pocket | Money with me   |  176.83
 2 | Bank   | My bank account | 5020.01

Total balances by currency:
    Euro: 5196.84</code></pre>
<p>As this is a backup file, we should change its prompt so that when we open it we are immediately alerted that we are on the backup file and not in the main file.</p>
<pre><code>Test &gt; set prompt &#39;Test-20240115 &gt; &#39;
Test-20240115 &gt; </code></pre>
<p>We can now return to the main file and trim the database.</p>
<pre><code>Test-20240315 &gt; open test.sqlite
Test &gt; ls tr

Account | Id | Date       | Description           | Total amount | Account balance
--------+----+------------+-----------------------+--------------+----------------
Bank    | 10 | 2024-01-15 | Lottery prize         |       150.00 |         5020.01
Pocket  |  9 | 2024-01-12 | ATM withdrawal        |        60.00 |          176.83
Bank    |  8 | 2024-01-12 | ATM withdrawal        |       -60.00 |         4870.01
Pocket  |  7 | 2024-01-12 | Supermarket           |       -10.90 |          116.83
Pocket  |  6 | 2024-01-04 | Supermarket           |        -5.72 |          127.73
Pocket  |  5 | 2024-01-03 | ATM withdrawal        |        10.00 |          133.45
Bank    |  4 | 2024-01-03 | ATM withdrawal        |       -10.00 |         4930.01
Bank    |  3 | 2024-01-02 | Phone bill, Jan. 2024 |       -59.99 |         4940.01
Bank    |  2 | 2024-01-01 | Initial amount        |      5000.00 |         5000.00
Pocket  |  1 | 2024-01-01 | Initial amount        |       123.45 |          123.45

Total amounts by currency:
    Euro: 5196.84</code></pre>
<p>Look at the transactions and see that the first, on both accounts, is on January 1st and the last on January 12th in the <em>Pocket</em> account and on January 15th on the <em>Bank</em> account. Let’s trim the database up to January 12.</p>
<pre><code>Test &gt; trim storage upto 1/12
Test &gt; ls tr

Account | Id | Date       | Description     | Total amount | Account balance
--------+----+------------+-----------------+--------------+----------------
Bank    | 10 | 2024-01-15 | Lottery prize   |       150.00 |         5020.01
Pocket  | 11 | 2024-01-12 | Trim carry-over |       176.83 |          176.83

Total amounts by currency:
    Euro: 326.83</code></pre>
<p>As we can see, all transactions of the <em>Pocket</em> account were removed and a new one was created with the account’s carry-over balance. On the <em>Bank</em> account there was one remaining transaction and therefore no need to create the carry-over transaction.</p>
<h4 id="usage-in-ms-windows">Usage in MS Windows</h4>
<p>As this program is pure Python 3, it may be run in any operating system where this language may be run, including Microsoft Windows, even though this system is not know for a very friendly environment for the users of command-line tools. Here I will provide some advice on how a Windows user could install and run the program but be advised that <strong>I DID NOT TEST THIS</strong>, so I may have missed some important detail. Please contact me if that is the case. In steps:</p>
<ol type="1">
<li><p>Start by downloading and installing the most recent version of the <a href="https://www.python.org/downloads/windows/">Python language to your system</a>.</p>
<p>When prompted, answer yes to the question about adding Python to your system PATH.</p></li>
<li><p>Download the most recent version of <em>Finance Control</em> from <a href="https://github.com/ammdias/finctrl">AMMDIAS GitHub page</a> and uncompress it in a directory of your choosing.</p></li>
<li><p>Create a <em>batch file</em> to launch the program which will permit that you start it without the need to open a command line first. Here is an example that you may use to create your own:</p>
<pre><code>:: Sample Windows batch file to execute the Finance Control program
:: on the file &#39;finctrl.sqlite&#39;

&quot;C:\Program Files\Python\python.exe&quot; ^
  C:\Users\USER\Programs\finctrl\finctrl.py ^
  C:\Users\USER\Documents\finctrl.sqlite</code></pre>
<p>On this batch file I assume that the Python executable is located in</p>
<pre><code>C:\Program Files\Python\Python.exe</code></pre>
<p>(you must check its actual location), that the program folder is in</p>
<pre><code>C:\Users\USER\Programs\finctrl</code></pre>
<p>(you should replace it with the path where you uncompressed the program) and that the database will be located in</p>
<pre><code>C:\Users\USER\Documents\finctrl.sqlite</code></pre>
<p>(you should replace this with the path where you wish the database to reside)</p></li>
<li><p>To start the program just open the Windows Explorer on the folder where you created the batch file and double click on it. If you created the batch file on the Desktop (you can do that, of course), you just need to double-click its icon. Provided everything is ok, a terminal window should open and you should see the program’s prompt:</p>
<pre><code>finctrl.sqlite &gt;</code></pre>
<p>Don’t forget you can change the terminal window settings (color, font, height and width) if you don’t like the Windows default.</p></li>
<li><p>(<em>Optional</em>) Set <em>Notepad</em> as the default text editor to use with the <code>source</code> command (please confirm the exact location of Notepad’s executable):</p>
<pre><code>finctrl.sqlite &gt; set editor &quot;C:\Windows\System32\notepad.exe&quot;</code></pre></li>
</ol>
<h2 id="reference">REFERENCE</h2>
<h3 id="commands-arguments-reference">Command’s arguments reference</h3>
<p>The command’s arguments must follow these general rules:</p>
<ul>
<li><p><strong>ACCOUNT_ID</strong>: account identification number (see <a href="#list-accounts">list accounts</a>).</p></li>
<li><p><strong>ACCOUNT_NAME</strong>: exact name of the account (see <a href="#list-accounts">list accounts</a>). This argument is <em>not</em> case-sensitive.</p></li>
<li><p><strong>AMOUNT</strong>: an integer or decimal number. The decimal part should be separated from the integer by the decimal separator character configured in the corresponding currency (see <a href="#show-currency">show currency</a>).</p></li>
<li><p><strong>CHARACTER</strong>: a single character. This argument <em>is</em> case-sensitive and cannot be a decimal digit (0-9).</p></li>
<li><p><strong>DATE</strong>: date in the general format YEAR-MONTH-DAY. The field separators may be dashes (‘-’) or forward slashes (‘/’). The year may be omitted (the current year is implicit) or without the century (21st century is implicit).</p></li>
<li><p><strong>FILE</strong>: path to the file to be opened or saved. May be an absolute path or relative to the directory where the program was started. The tilde (‘~’) will be replaced by the current user’s home directory absolute path.</p></li>
<li><p><strong>LEFT</strong> / <strong>RIGHT</strong> / <strong>ON</strong> / <strong>OFF</strong>: exact text that should be entered. This argument is <em>not</em> case-sensitive.</p></li>
<li><p><strong>LIST</strong>: comma-separated list of text arguments. If the arguments contain spaces or quotes, the whole list must be enveloped in quotes (single or double).</p></li>
<li><p><strong>CURR_NAME</strong>: exact name of an existing currency, as entered in the database. (see <a href="#list-currencies">list currencies</a>). This argument is <em>not</em> case-sensitive.</p></li>
<li><p><strong>NUMBER</strong>: integer number.</p></li>
<li><p><strong>TEXT</strong>: sequence of characters. Must be enveloped in quotes (single or double) if it contains spaces or quotes.</p></li>
<li><p><strong>TRANSACTION_ID</strong>: transaction identification number (see <a href="#list-transactions">list transactions</a>).</p></li>
<li><p><strong>PARCEL_ID</strong>: parcel identification number (see <a href="#show-transaction">show transaction</a>).</p></li>
</ul>
<h3 id="add">add</h3>
<p><code>add</code> is a <em>meta-command</em> with several available forms. Below are their descriptions:</p>
<h4 id="add-account">add account</h4>
<p>(shortcut: <code>add acc</code>)</p>
<p>Adds an account to the database.</p>
<pre><code>&gt; add acc[ount] TEXT [descr[iption] TEXT] [curr[ency] CURR_NAME]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): name for the new account. Should be short and without spaces, as it may be used for the account identification in other commands.</li>
<li><strong>description</strong> (<em>optional</em>): description of the new account.</li>
<li><strong>currency</strong> (<em>optional</em>): name of the currency for the new account. If not provided, the default currency of the database will be used (see <a href="#show-settings">show settings</a>).</li>
</ul>
<h4 id="add-currency">add currency</h4>
<p>(shortcut: <code>add curr</code>)</p>
<p>Adds a currency to the database.</p>
<pre><code>&gt; add curr[ency] TEXT [short TEXT] [symbol TEXT] [position LEFT|RIGHT] \
:     [decplaces NUMBER] [decsep CHARACTER]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): name for the new currency. Should be short and without spaces as it will be used to identify the currency in other commands.</li>
<li><strong>short</strong> (<em>optional</em>): short name for the currency, like ‘EUR’ for Euro or ‘USD’ for United States Dollar. Currently not used in the program.</li>
<li><strong>symbol</strong> (<em>optional</em>): symbol of the currency, like ‘€’ for Euro or ‘$’ for Dollar. Currently not used in the program.</li>
<li><strong>position</strong> (<em>optional</em>): position of the currency symbol relative the digits when printing an amount in the currency. Currently not used in the program.</li>
<li><strong>decplaces</strong> (<em>optional</em>): number of decimal places for the currency. This is the precision that will be used when storing and displaying amounts in the currency (all other digits will be discarded).</li>
<li><strong>decsep</strong> (<em>optional</em>): character used to separate the integer from the decimal part of amounts in the currency. It will be used to print currency amounts as well as to scan amounts input by the user.</li>
</ul>
<p>All optional arguments not provided, with the exception of the short name, will be copied from the currency named <code>default</code>.</p>
<h4 id="add-deposit">add deposit</h4>
<p>Adds a single-parcel transaction to the database.</p>
<pre><code>&gt; add deposit of AMOUNT on ACCOUNT_NAME|ACCOUNT_ID \
:     [descr[iption] TEXT] [date DATE] [tags LIST]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>of</strong>: total amount of the transaction. Will be the amount of the single parcel.</li>
<li><strong>on</strong>: account on which the transaction will be added (see <a href="#list-accounts">list accounts</a>).</li>
<li><strong>description</strong> (<em>optional</em>): description of the transaction and parcel. If not provided the <em>default deposit text</em> will be used (see <a href="#show-settings">show settings</a>).</li>
<li><strong>date</strong> (<em>optional</em>): the date the transaction is effective. If not provided, the current date will be used.</li>
<li><strong>tags</strong> (<em>optional</em>): list of tags to be added to the single parcel.</li>
</ul>
<h4 id="add-expense">add expense</h4>
<p>(shortcut: <code>add exp</code>)</p>
<p>Adds a negative transaction to the database. All amounts provided will be negated (multiplied by <code>-1</code>) before being added to the database.</p>
<pre><code>&gt; add exp[ense] on ACCOUNT_NAME|ACCOUNT_ID \
:     [descr[iption] TEXT] [date DATE] \
:     of AMOUNT | parcel &quot;TEXT AMOUNT [tags LIST]&quot;...</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>on</strong>: name or identification of the account on which the transaction will be added (see <a href="#list-accounts">list accounts</a>).</li>
<li><strong>description</strong> (<em>optional</em>): description of the transaction.</li>
<li><strong>date</strong> (<em>optional</em>): date on which the transaction will be effective. If not provided the current date will be used.</li>
<li><strong>of</strong>: amount of the single parcel transaction to be added. If provided, the user may not provide any parcel.</li>
<li><strong>parcel</strong>: description of one parcel to be added to this transaction. Transactions may have any number of parcels. The parcel description must be enveloped in quotes (single or double). The parcel description must have these arguments:
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the description of this parcel;</li>
<li><strong>AMOUNT</strong> (<em>positional</em>): the amount of this parcel;</li>
<li><strong>tags</strong> (<em>optional</em>): list of tags to be added to this parcel.</li>
</ul></li>
</ul>
<h4 id="add-parcel">add parcel</h4>
<p>Adds a parcel to an existing transaction.</p>
<pre><code>&gt; add parcel TEXT of AMOUNT on TRANSACTION_ID [tags LIST]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): description of the parcel to be added.</li>
<li><strong>of</strong>: amount of the parcel to be added.</li>
<li><strong>on</strong>: identification of the transaction on which the parcel will be added (see <a href="#list-transactions">list transactions</a>).</li>
<li><strong>tags</strong> (<em>optional</em>): list of tags to be added to this parcel.</li>
</ul>
<h4 id="add-tag">add tag</h4>
<p>Adds a tag to an existing parcel.</p>
<pre><code>&gt; add tag TEXT to PARCEL_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the tag to add.</li>
<li><strong>to</strong>: identification of the parcel to which the tag will be added (see <a href="#show-transaction">show transaction</a>).</li>
</ul>
<h4 id="add-transaction">add transaction</h4>
<p>(shortcut: <code>add tr</code>)</p>
<p>Adds a transaction to the database.</p>
<pre><code>&gt; add tr[ansaction] on ACCOUNT_NAME|ACCOUNT_ID \
:     [neg] [descr[iption] TEXT] [date DATE] \
:     of AMOUNT | parcel &quot;TEXT AMOUNT [tags LIST]&quot;...</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>on</strong>: name or identification of the account on which the transaction will be added (see <a href="#list-accounts">list accounts</a>).</li>
<li><strong>neg</strong> (<em>positional</em>, <em>optional</em>): indication that all amounts should be negated (multiplied by <code>-1</code>) before being added to the database.</li>
<li><strong>description</strong> (<em>optional</em>): description of the transaction.</li>
<li><strong>date</strong> (<em>optional</em>): date on which the transaction will be effective. If not provided, the current date will be used.</li>
<li><strong>of</strong>: amount of the single parcel transaction to be added. If provided, the user may not provide any extra parcel.</li>
<li><strong>parcel</strong>: description of one parcel to be added to this transaction. Transactions may have any number of parcels. The parcel description must be enveloped in quotes (single or double). The parcel description must have these arguments:
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the description of this parcel;</li>
<li><strong>AMOUNT</strong> (<em>positional</em>): the amount of this parcel;</li>
<li><strong>tags</strong> (<em>optional</em>): list of tags to be added to this parcel.</li>
</ul></li>
</ul>
<h4 id="add-transfer">add transfer</h4>
<p>Adds two transactions to the database. The first removes the amount from an account and the second adds it to the other account, effectively transferring it from one to the other.</p>
<pre><code>&gt; add transfer of AMOUNT [descr[iption] TEXT] [date DATE] [tags LIST]
:     from ACCOUNT_NAME|ACCOUNT_ID to ACCOUNT_NAME|ACCOUNT_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>of</strong>: total amount of the transaction. Will be the amount of the single parcel of each transaction (being negated, multiplied by <code>-1</code> on the first).</li>
<li><strong>description</strong> (<em>optional</em>): description of the transaction and parcels. If not provided the <em>default transfer text</em> will be used (see <a href="#show-settings">show settings</a>).</li>
<li><strong>date</strong> (<em>optional</em>): the date the transactions are effective. If not provided, the current date will be used.</li>
<li><strong>tags</strong> (<em>optional</em>): list of tags to be added to the parcels.</li>
<li><strong>from</strong>: account from which the amount will be withdrawn (see <a href="#list-accounts">list accounts</a>).</li>
<li><strong>to</strong>: account on which the amount will be deposited (see <a href="#list-accounts">list accounts</a>).</li>
</ul>
<h4 id="add-withdrawal">add withdrawal</h4>
<p>Adds a single-parcel negative transaction to the database. The amount will be negated (multiplied by <code>-1</code>) before being added to the database.</p>
<pre><code>&gt; add withdrawal of AMOUNT on ACCOUNT_NAME|ACCOUNT_ID \
:     [descr[iption] TEXT] [date DATE] [tags LIST]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>of</strong>: total amount of the transaction. Will be the amount of the single parcel. Will be negated (multiplied by <code>-1</code>) before being added to the database.</li>
<li><strong>on</strong>: account on which the transaction will be added (see <a href="#list-accounts">list accounts</a>).</li>
<li><strong>description</strong> (<em>optional</em>): description of the transaction and parcel. If not provided the <em>default withdrawal text</em> will be used (see <a href="#show-settings">show settings</a>).</li>
<li><strong>date</strong> (<em>optional</em>): the date the transaction is effective. If not provided, the current date will be used.</li>
<li><strong>tags</strong> (<em>optional</em>): list of tags to be added to the single parcel.</li>
</ul>
<h3 id="backup">backup</h3>
<p>Copies current database to a new file.</p>
<pre><code>&gt; backup FILE</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>FILE</strong> (<em>positional</em>): path to the new file. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the users’ absolute home path.</li>
</ul>
<h3 id="bye">bye</h3>
<p>(shortcuts: <code>EOF</code>; the system’s end-of-file character)</p>
<p>Quits the Finance Control program.</p>
<pre><code>&gt; bye|EOF</code></pre>
<h3 id="change">change</h3>
<p><code>change</code> is a <em>meta-command</em> with several available forms. Below are their descriptions:</p>
<h4 id="change-account">change account</h4>
<p>(shortcuts: <code>change acc</code>; <code>ch account</code>; <code>ch acc</code>)</p>
<p>Changes an account’s description.</p>
<pre><code>&gt; ch[ange] acc[ount] ACCOUNT_NAME|ACCOUNT_ID descr[iption] to TEXT</code></pre>
<p>Changes an account’s name.</p>
<pre><code>&gt; ch[ange] acc[ount] ACCOUNT_NAME|ACCOUNT_ID name to TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>ACCOUNT_NAME|ACCOUNT_ID</strong> (<em>positional</em>): identification of the account to change.</li>
<li><strong>to</strong>: new description or name.</li>
</ul>
<h4 id="change-currency">change currency</h4>
<p>(shortcuts: <code>change curr</code>; <code>ch currency</code>; <code>ch curr</code>)</p>
<p>Changes a currency’s settings:</p>
<pre><code>&gt; ch[ange] curr[ency] CURR_NAME [short TEXT] \
:          [symbol TEXT] [position LEFT|RIGHT] \
:          [decplaces NUMBER] [decsep CHARACTER]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>CURR_NAME</strong> (<em>positional</em>): name of the currency to change.</li>
<li><strong>short</strong> (<em>optional</em>): new short name for the currency, like ‘EUR’ for Euro or ‘USD’ for United States Dollar. Currently not used in the program.</li>
<li><strong>symbol</strong> (<em>optional</em>): new symbol of the currency, like ‘€’ for Euro or ‘$’ for Dollar. Currently not used in the program.</li>
<li><strong>position</strong> (<em>optional</em>): new position of the currency symbol relative the digits when printing an amount in the currency. Currently not used in the program.</li>
<li><strong>decplaces</strong> (<em>optional</em>): new number of decimal places for the currency. This is the precision that will be used when storing and displaying amounts in the currency (all other digits will be discarded). <strong>ATTENTION</strong>: all amounts from all transactions in the currency will be updated to the new decimal places, changing their value accordingly (e.g. <code>123.45</code> will be <code>12.345</code> if the number of decimal places changes from 2 to 3).</li>
<li><strong>decsep</strong> (<em>optional</em>): new character used to separate the integer from the decimal part of amounts in the currency. It will be used to print currency amounts as well to scan amounts input by the user.</li>
</ul>
<h4 id="change-parcel">change parcel</h4>
<p>(shortcut: <code>ch parcel</code>)</p>
<p>Changes a parcel’s amount:</p>
<pre><code>&gt; ch[ange] parcel PARCEL_ID amount to AMOUNT</code></pre>
<p>Or changes a parcel’s description:</p>
<pre><code>&gt; ch[ange] parcel PARCEL_ID descr[iption] to TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>PARCEL_ID</strong> (<em>positional</em>): identification number of the parcel to change.</li>
<li><strong>to</strong>: new text or amount.</li>
</ul>
<h4 id="change-tag">change tag</h4>
<p>(shortcut: <code>ch tag</code>)</p>
<p>Renames a tag.</p>
<pre><code>&gt; ch[ange] tag TAG to TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TAG</strong> (<em>positional</em>): tag name to be renamed.</li>
<li><strong>to</strong>: new name for the tag.</li>
</ul>
<h4 id="change-transaction">change transaction</h4>
<p>(shortcuts: <code>change tr</code>; <code>ch transaction</code>; <code>ch tr</code>)</p>
<p>Move a transaction to another account:</p>
<pre><code>&gt; ch[ange] tr[ansaction] TRANSACTION_ID acc[ount] \
:          to ACCOUNT_NAME|ACCOUNT_ID</code></pre>
<p>Change a transaction’s date:</p>
<pre><code>&gt; ch[ange] tr[ansaction] TRANSACTION_ID date to DATE</code></pre>
<p>Change a transaction’s description:</p>
<pre><code>&gt; ch[ange] tr[ansaction] TRANSACTION_ID descr[iption] to TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TRANSACTION_ID</strong> (<em>positional</em>): identification number of the transaction to change (see <a href="#list-transactions">list transactions</a>).</li>
<li><strong>to</strong>: new transaction account, date or description.</li>
</ul>
<h3 id="close">close</h3>
<p>Closes the currently opened file.</p>
<pre><code>&gt; close</code></pre>
<h3 id="delete">delete</h3>
<p><code>delete</code> is a <em>meta-command</em> with several available forms. Below are their descriptions:</p>
<h4 id="delete-account">delete account</h4>
<p>(shortcuts: <code>delete acc</code>; <code>del account</code>; <code>del acc</code>)</p>
<p>Removes an account and all its transactions and corresponding parcels from the database.</p>
<pre><code>&gt; del[ete] acc[ount] ACCOUNT_NAME|ACCOUNT_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>ACCOUNT_NAME|ACCOUNT_ID</strong> (<em>positional</em>): identification of the account to be deleted from the database.</li>
</ul>
<h4 id="delete-transaction">delete transaction</h4>
<p>(shortcuts: <code>delete tr</code>; <code>del transaction</code>; <code>del tr</code>)</p>
<p>Removes a transaction and corresponding parcels from the database.</p>
<pre><code>&gt; del[ete] tr[ansaction] TRANSACTION_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TRANSACTION_ID</strong> (<em>positional</em>): identification of the transaction to delete.</li>
</ul>
<h4 id="delete-parcel">delete parcel</h4>
<p>(shortcut: <code>del parcel</code>)</p>
<p>Removes a parcel from a transaction.</p>
<pre><code>&gt; del[ete] parcel PARCEL_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>PARCEL_ID</strong> (<em>positional</em>): identification of the parcel to delete.</li>
</ul>
<h4 id="delete-tag">delete tag</h4>
<p>(shortcut: <code>del tag</code>)</p>
<p>Remove a tag from all parcels:</p>
<pre><code>&gt; del[ete] tag TEXT</code></pre>
<p>Remove a tag from a parcel:</p>
<pre><code>&gt; del[ete] tag TEXT from PARCEL_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): tag to be deleted.</li>
<li><em>from</em>: identification of the parcel from which the tag will be deleted. (see <a href="#show-transaction">show transaction</a>)</li>
</ul>
<h3 id="find">find</h3>
<p><code>find</code> is a <em>meta-command</em> with two available forms. Below are their descriptions:</p>
<h4 id="find-parcels">find parcels</h4>
<p>List parcels that contain a specific piece of text anywhere in their description.</p>
<pre><code>&gt; find parcels like TEXT [from DATE] [to DATE] \
:                        [top NUMBER] [rev] [tofile FILE]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the piece of text to search for in the parcel description (not case sensitive)</li>
<li><strong>from</strong> (<em>optional</em>): lower date limit of the results to be displayed. If no date is given, the results will include all parcels from the first recorded to the upper limit.</li>
<li><strong>to</strong> (<em>optional</em>): upper date limit of the results to be displayed. If no date is given, the results will include all parcels from the lower limit to the last recorded one.</li>
<li><strong>top</strong> (<em>optional</em>): maximum number of results to be displayed.</li>
<li><strong>rev</strong> (<em>optional</em>): reverse the order of the results, presenting them from the most ancient to the most recent.</li>
<li><strong>tofile</strong> (<em>optional</em>): path to the CSV file where the information should be saved. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the user’s absolute home path.</li>
</ul>
<h4 id="find-transactions">find transactions</h4>
<p>(shortcut: <code>find tr</code>)</p>
<p>List transactions that contain a specific piece of text anywhere in their description.</p>
<pre><code>&gt; find tr[ansactions] like TEXT [from DATE] [to DATE] \
:                               [top NUMBER] [rev] [tofile FILE]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the piece of text to search for in the transaction description (not case sensitive)</li>
<li><strong>from</strong> (<em>optional</em>): lower date limit of the results to be displayed. If no date is given, the results will include all transactions from the first recorded to the upper limit.</li>
<li><strong>to</strong> (<em>optional</em>): upper date limit of the results to be displayed. If no date is given, the results will include all transactions from the lower limit to the last recorded one.</li>
<li><strong>top</strong> (<em>optional</em>): Maximum number of results to be displayed.</li>
<li><strong>rev</strong> (<em>optional</em>): reverse the order of the results, presenting them from the most ancient to the most recent.</li>
<li><strong>tofile</strong> (<em>optional</em>): path to the CSV file where the information should be saved. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the user’s absolute home path.</li>
</ul>
<h3 id="help">help</h3>
<p>(shortcut: <code>?</code>)</p>
<p>Displays all available commands or the purpose and syntax of a specific command.</p>
<pre><code>&gt; help|? [COMMAND]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>COMMAND</strong> (<em>positional</em>, <em>optional</em>): command to be displayed.</li>
</ul>
<h3 id="list">list</h3>
<p><code>list</code> is a <em>meta-command</em> with several available forms. Below are their descriptions:</p>
<h4 id="list-accounts">list accounts</h4>
<p>(shortcuts: <code>list acc</code>; <code>ls accounts</code>; <code>ls acc</code>)</p>
<p>Displays a table with information about the requested accounts.</p>
<pre><code>&gt; list|ls acc[ounts] [ACCOUNT_NAME] [tofile FILE]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>ACCOUNT_NAME</strong> (<em>positional</em>, <em>optional</em>): name of the account to be displayed. If no account is requested, all accounts will be displayed.</li>
<li><strong>tofile</strong> (<em>optional</em>): path to the CSV file where the information should be saved. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the users’ absolute home path.</li>
</ul>
<h4 id="list-currencies">list currencies</h4>
<p>(shortcuts: <code>list curr</code>, <code>ls currencies</code>, <code>ls curr</code>)</p>
<p>Displays a table with information about the requested currencies.</p>
<pre><code>&gt; list|ls curr[encies] [CURR_NAME] [tofile FILE]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>CURR_NAME</strong> (<em>positional</em>, <em>optional</em>): name of the currency to be displayed. If no currency is requested, all currencies will be displayed.</li>
<li><strong>tofile</strong> (<em>optional</em>): path to the CSV file where the information should be saved. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the user’s absolute home path.</li>
</ul>
<h4 id="list-parcels">list parcels</h4>
<p>(shortcut: <code>ls parcels</code>)</p>
<p>Displays a list of all parcels filtered by specific tags.</p>
<pre><code>&gt; list|ls parcels tagged LIST [from DATE] [to DATE] \
:                             [top NUMBER] [rev] [tofile FILE]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>LIST</strong> (<em>positional</em>): list of tags to search.</li>
<li><strong>from</strong> (<em>optional</em>): lower date limit of the results to be displayed. If no date is given, the results will include all parcels from the first recorded to the upper limit.</li>
<li><strong>to</strong> (<em>optional</em>): upper date limit of the results to be displayed. If no date is given, the results will include all parcels from the lower limit to the last recorded one.</li>
<li><strong>top</strong> (<em>optional</em>): Maximum number of results to be displayed.</li>
<li><strong>rev</strong> (<em>optional</em>): reverse the order of the results, presenting them from the most ancient to the most recent.</li>
<li><strong>tofile</strong> (<em>optional</em>): path to the CSV file where the information should be saved. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the user’s absolute home path.</li>
</ul>
<h4 id="list-tags">list tags</h4>
<p>(shortcut: <code>ls tags</code>)</p>
<p>Displays a list of all recorded tags and the number of parcels where each is used.</p>
<pre><code>&gt; list|ls tags [tofile FILE]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>tofile</strong> (<em>optional</em>): path to the CSV file where the information should be saved. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the users’ absolute home path.</li>
</ul>
<h4 id="list-transactions">list transactions</h4>
<p>(shortcuts: <code>list tr</code>; <code>ls transactions</code>; <code>ls tr</code>)</p>
<p>Displays a list of transactions filtered by specific criteria.</p>
<pre><code>&gt; list|ls tr[ansactions] [on LIST] [of AMOUNT] [from DATE] [to DATE] \
:                        [top NUMBER] [rev] [tofile FILE]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>on</strong> (<em>optional</em>): list of account identifications (ACCOUNT_NAME or ACCOUNT_ID) of the transactions to be displayed. If no account is given, transactions from all accounts will be displayed.</li>
<li><strong>of</strong> (<em>optional</em>): amount of the transactions to be displayed — only transactions of this specific amount will be listed. When using this option, all acounts searched must have the same currency.</li>
<li><strong>from</strong> (<em>optional</em>): lower date limit of the results to be displayed. If no date is given, the results will include all transactions from the first recorded to the upper limit.</li>
<li><strong>to</strong> (<em>optional</em>): upper date limit of the results to be displayed. If no date is given, the results will include all transactions from the lower limit to the last recorded one.</li>
<li><strong>top</strong> (<em>optional</em>): Maximum number of results to be displayed.</li>
<li><strong>rev</strong> (<em>optional</em>): reverse the order of the results, presenting them from the most ancient to the most recent.</li>
<li><strong>tofile</strong> (<em>optional</em>): path to the CSV file where the information should be saved. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the users’ absolute home path.</li>
</ul>
<h3 id="open">open</h3>
<p>Opens a Finance Control database file.</p>
<pre><code>&gt; open FILE</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>FILE</strong> (<em>positional</em>): path to the file to be opened. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the users’ absolute home path.</li>
</ul>
<h3 id="set">set</h3>
<p><code>set</code> is a <em>meta-command</em> with several available forms. Below are their descriptions:</p>
<h4 id="set-csvsep">set csvsep</h4>
<p>Sets the field separator character for CSV files.</p>
<pre><code>&gt; set csvsep CHARACTER</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>CHARACTER</strong> (<em>positional</em>): the character to be set as a field separator for CSV files.</li>
</ul>
<h4 id="set-currency">set currency</h4>
<p>Sets the default currency to be used for new accounts.</p>
<pre><code>&gt; set curr[ency] CURR_NAME</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>CURR_NAME</strong> (<em>positional</em>): the name of the currency to be used as default for new accounts.</li>
</ul>
<h4 id="set-deposit">set deposit</h4>
<p>Sets the default description to be used for new deposits.</p>
<pre><code>&gt; set deposit descr[iption] TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the description to be used as default for new deposits.</li>
</ul>
<h4 id="set-echo">set echo</h4>
<p>Enables or disables command echo (repeat) on the prompt.</p>
<pre><code>&gt; set echo ON|OFF</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>ON|OFF</strong> (<em>positional</em>): <code>on</code> enables command echo, <code>off</code> disables it. This argument is <em>not</em> case-sensitive.</li>
</ul>
<h4 id="set-editor">set editor</h4>
<p>Sets the external text editor to open the files passed to the <a href="#source">source</a> command.</p>
<pre><code>&gt; set editor TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (positional): the command to launch the preferred text editor (e.g. <code>vim</code>, <code>nano</code>, <code>gedit</code> or <code>notepad.exe</code>).</li>
</ul>
<h4 id="set-prompt">set prompt</h4>
<p>Sets the prompt to be used for the current file.</p>
<pre><code>&gt; set prompt TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the text to be used as prompt when the current file is opened.</li>
</ul>
<h4 id="set-transfer">set transfer</h4>
<p>Sets the default description to be used for new account transfers.</p>
<pre><code>&gt; set transfer descr[iption] TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the description to be used for new account transfers.</li>
</ul>
<h4 id="set-withdrawal">set withdrawal</h4>
<p>Sets the default description to be used for new withdrawals.</p>
<pre><code>&gt; set withdrawal descr[iption] TEXT</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TEXT</strong> (<em>positional</em>): the default description to be used for new withdrawals.</li>
</ul>
<h3 id="show">show</h3>
<p><code>show</code> is a <em>meta-command</em> with several available forms. Below are their descriptions:</p>
<h4 id="show-account">show account</h4>
<p>(shortcuts: <code>show acc</code>; <code>show account</code>; <code>sh acc</code>)</p>
<p>Displays detailed information about an account.</p>
<pre><code>&gt; sh[ow] acc[ount] ACCOUNT_NAME|ACCOUNT_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>ACCOUNT_NAME|ACCOUNT_ID</strong> (<em>positional</em>): identification of the account to be displayed. This argument is not case-sensitive.</li>
</ul>
<h4 id="show-copyright">show copyright</h4>
<p>(shortcut: <code>sh copyright</code>)</p>
<p>Displays copyright information.</p>
<pre><code>&gt; sh[ow] copyright</code></pre>
<h4 id="show-currency">show currency</h4>
<p>(shortcuts: <code>show curr</code>; <code>sh currency</code>; <code>sh curr</code>)</p>
<p>Displays detailed information about a currency.</p>
<pre><code>&gt; sh[ow] curr[ency] CURR_NAME</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>CURR_NAME</strong> (<em>positional</em>): the name of the currency to be displayed. This argument is <em>not</em> case-sensitive.</li>
</ul>
<h4 id="show-license">show license</h4>
<p>(shortcut: <code>sh license</code>)</p>
<p>Displays the Finance Control program’s copyright license.</p>
<pre><code>&gt; sh[ow] license [inline]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>inline</strong> (<em>positional</em>, <em>optional</em>): instructs the program to display the license on the terminal. If not present, the license text will be displayed on a web browser if one is available.</li>
</ul>
<h4 id="show-manual">show manual</h4>
<p>(shortcut: <code>sh manual</code>)</p>
<p>Displays this manual.</p>
<pre><code>&gt; sh[ow] manual [inline]</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>inline</strong> (<em>positional</em>, <em>optional</em>): instructs the program to display the manual on the terminal. If not present, the manual will be displayed on a web browser, if one is available.</li>
</ul>
<h4 id="show-settings">show settings</h4>
<p>(shortcut: <code>sh settings</code>)</p>
<p>Displays the default program settings of the opened file.</p>
<pre><code>&gt; sh[ow] settings</code></pre>
<h4 id="show-transaction">show transaction</h4>
<p>(shortcuts: <code>show tr</code>; <code>sh transaction</code>; <code>sh tr</code>)</p>
<p>Displays detailed information about a transaction, including its parcels.</p>
<pre><code>&gt; sh[ow] tr[ansaction] TRANSACTION_ID</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>TRANSACTION_ID</strong> (<em>positional</em>): identification number of the transaction to be displayed.</li>
</ul>
<h3 id="source">source</h3>
<p>Executes commands from an external text file. Optionally, opens an external text editor to edit the file prior to executing its commands. The lines that start with a semicolon will be ignored by this command.</p>
<pre><code>&gt; source [edit] FILE</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>edit</strong> (<em>positional</em>, <em>optional</em>): instructs the program to open the file on an external text editor before executing the commands. If no editor is explicitly configured, via the <a href="#set-editor">set editor</a> command, the program will scan the <code>VISUAL</code> and <code>EDITOR</code> environment variables to discover the editor to launch. If no editor is configured on those variables, an error will be output and no editor will be launched. The commands in the text file will be executed after closing the editor (do remember to save the file!).</li>
<li><strong>FILE</strong> (<em>positional</em>): path to the file to be executed. May be an absolute or relative path (relative to the directory the application was started). The tilde (‘<code>~</code>’) may be used in substitution of the users’ absolute home path.</li>
</ul>
<h3 id="trim">trim</h3>
<p><code>trim</code> is a <em>meta-command</em> with two available forms. Below are their descriptions:</p>
<h4 id="trim-account">trim account</h4>
<p>Removes all transactions prior to the specified date from an account. If no transaction remains, one will be created with the amount of the account balance at that date.</p>
<pre><code>&gt; trim acc[ount] ACCOUNT_NAME|ACCOUNT_ID upto DATE</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>ACCOUNT_NAME|ACCOUNT_ID</strong> (<em>positional</em>): account identification from which the transactions will be removed.</li>
<li><strong>DATE</strong>: date up to which the transactions will be removed.</li>
</ul>
<h4 id="trim-storage">trim storage</h4>
<p>Removes all transactions prior to the specified date from the database. If no transaction remains on an account, one will be created with the amount of the account balance at that date.</p>
<pre><code>&gt; trim storage upto DATE</code></pre>
<p>Arguments:</p>
<ul>
<li><strong>DATE</strong>: date up to which the transactions will be removed.</li>
</ul>
<h3 id="database-structure">Database structure</h3>
<p>Below are the instructions used to create the database on SQLite, which reflect its schema:</p>
<pre><code>CREATE TABLE metadata (
     key         text not null,
     value       text not null,
     primary key (key)
);

CREATE TABLE currencies (
    name        text not null,
    short_name  text,
    symbol      text,
    symbol_pos  text,
    dec_places  integer,
    dec_sep     text,
    primary key (name)
);

CREATE TABLE accounts (
    key         integer,
    name        text not null,
    balance     integer,
    descr       text,
    currency    text,
    primary key (key),
    foreign key (currency) references currencies(name)
);

CREATE TABLE transactions (
    key         integer,
    account     integer not null,
    date        text,
    descr       text,
    amount      integer not null,
    accbalance  integer not null,
    primary key (key),
    foreign key (account) references accounts(key)
);

CREATE TABLE parcels (
    key         integer,
    trans       integer not null,
    descr       text,
    amount      integer not null,
    primary key (key),
    foreign key (trans) references transactions(key)
);

CREATE TABLE parceltags (
    parcel      integer not null,
    tag         text not null,
    primary key (parcel, tag),
    [[foreign]] key (parcel) references parcels(key)
);

CREATE TRIGGER del_currency before delete on currencies
begin
    delete from accounts where currency=old.name;
end;

CREATE TRIGGER del_account before delete on accounts
begin
    delete from transactions where account=old.key;
end;

CREATE TRIGGER del_transaction before delete on transactions
begin
    delete from parcels where trans=old.key;
end;

CREATE TRIGGER del_parcel after delete on parcels
begin
    delete from parceltags where parcel=old.key;
end;</code></pre>
<h2 id="license">LICENSE</h2>
<p>Copyright (C) 2021 António Manuel Dias</p>
<p>contact: ammdias@gmail.com</p>
<p>website: <a href="https://ammdias.duckdns.org/downloads">AMMDIAS</a></p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the <a href="http://www.gnu.org/licenses">GNU General Public License</a> along with this program. If not, please check the site above.</p>
